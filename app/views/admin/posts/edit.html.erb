<!-- app/views/admin/posts/edit.html.erb -->
<!-- 管理画面:投稿編集 -->

<div class="row">
  <div class="col-md-10 offset-md-1">
    <h1 class="mb-4">投稿編集</h1>

    <%= form_with(model: @post, url: admin_post_path(@post), method: :patch, local: true) do |f| %>
      <!-- エラーメッセージ -->
      <% if @post.errors.any? %>
        <div class="alert alert-danger">
          <h5><%= pluralize(@post.errors.count, "個") %>のエラーがあります</h5>
          <ul class="mb-0">
            <% @post.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <!-- タイトル -->
      <div class="mb-3">
        <%= f.label :title, 'タイトル', class: 'form-label' %>
        <%= f.text_field :title, class: 'form-control', placeholder: 'ブログのタイトルを入力', autofocus: true %>
      </div>

      <!-- 本文 -->
      <div class="mb-3">
        <%= f.label :content, '本文（Markdown形式）', class: 'form-label' %>
        <%= f.text_area :content, class: 'form-control', rows: 20, placeholder: 'Markdown形式で本文を入力' %>
        <div class="form-text">
          Markdown記法が使用できます。
          <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" class="text-decoration-none">
            Markdown記法について
          </a>
        </div>
      </div>

      <!-- ボタン -->
      <div class="d-flex gap-2">
        <%= f.submit '更新する', class: 'btn btn-primary' %>
        <%= link_to 'キャンセル', admin_posts_path, class: 'btn btn-secondary' %>
        <%= link_to 'プレビュー', post_path(@post), class: 'btn btn-info', target: '_blank' %>
      </div>
    <% end %>

    <!-- 投稿情報 -->
    <div class="mt-4 p-3 bg-light rounded">
      <small class="text-muted">
        <strong>投稿日時:</strong> <%= @post.created_at.strftime('%Y年%m月%d日 %H:%M') %><br>
        <strong>更新日時:</strong> <%= @post.updated_at.strftime('%Y年%m月%d日 %H:%M') %><br>
        <strong>投稿者:</strong> <%= @post.user.email %>
      </small>
    </div>
  </div>
</div>

<!-- Markdown参考情報 -->
<div class="row mt-5">
  <div class="col-md-10 offset-md-1">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Markdown記法の例</h5>
      </div>
      <div class="card-body">
        <pre class="mb-0"><code># 見出し1
## 見出し2
### 見出し3

**太字** *イタリック* ~~取り消し線~~

- リスト項目1
- リスト項目2

1. 番号付きリスト1
2. 番号付きリスト2

[リンクテキスト](URL)

```ruby
# コードブロック
def hello
  puts "Hello, World!"
end
```

> 引用文</code></pre>
      </div>
    </div>
  </div>
</div>
